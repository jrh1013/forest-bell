<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>휴양림 예약 모니터링</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
    <h1>휴양림 예약 모니터링</h1>
    <button class="btn" onclick="startWorkflow()">모니터링 시작</button>
    <p>예약 조건 (<span id="count">0</span>/15)</p>
    <div id="list"></div>
    <!-- 플로팅 버튼 -->
    <a href="add.html" class="fab">+</a>
    <a href="token.html" class="fab token">TOKEN</a>
</div>
<script src="script.js"></script>
<script>
async function render() {
    const data = await fetchData();
    const listDiv = document.getElementById('list');
    listDiv.innerHTML = '';
    data.forEach((item, i) => {
        const div = document.createElement('div');
        div.className = "card";
        div.innerHTML = `${item.region} - ${item.date} <span class="delete" onclick="del(${i})">삭제</span>`;
        listDiv.appendChild(div);
    });
    document.getElementById('count').textContent = data.length;
}

async function del(i) {
    const data = await fetchData();
    data.splice(i, 1);
    const success = await updateData(data);
    if (success) {
        alert("✅ 삭제 완료");
        location.reload();
    }
}
render();
</script>
</body>
</html>
