<div class="container">
    <h1>휴양림 예약 모니터링</h1>
    <button id="monitorBtn" class="btn" style="background: {{ 'gray' if monitoring else 'green' }};">
        {{ '모니터링 종료' if monitoring else '모니터링 시작' }}
    </button>
    <p>예약 조건 ({{count}}/15)</p>
    {% for item in reservations %}
    <div class="card">
        <div>{{item.region}}</div>
        <div>{{item.date}}</div>
        <a href="{{ url_for('delete', index=loop.index0) }}" class="delete">삭제</a>
    </div>
    {% endfor %}
    <a href="{{ url_for('add') }}" class="fab">+</a>
</div>

<script>
document.getElementById("monitorBtn").addEventListener("click", function() {
    let action = this.innerText.includes('시작') ? '/start' : '/stop';
    fetch(action, { method: 'POST' })
        .then(res => res.json())
        .then(data => {
            if (data.status === "running") {
                this.innerText = "모니터링 종료";
                this.style.background = "gray";
            } else {
                this.innerText = "모니터링 시작";
                this.style.background = "green";
            }
        });
});
</script>
